var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS",this.device=this.searchString(this.dataDevice)||"an unknown Device"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string,dataProp=data[i].prop;if(this.versionSearchString=data[i].versionSearch||data[i].identity,dataString){if(-1!=dataString.indexOf(data[i].subString))return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(-1!=index)return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"RockMelt",identity:"RockMelt"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"IE",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"iOS",identity:"iOS"}],dataDevice:[{string:navigator.platform,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"iPhone",identity:"iPhone"}]};BrowserDetect.init(),function(){var log_methods={error:5,warn:4,info:3,debug:2,log:1},send_data=function(opts){var img=document.createElement("img");img.src=opts.url+".gif?PLAINTEXT="+encodeURIComponent(opts.data)+"&DT="+encodeURIComponent(Date())},castor=function(opts){if(!opts.url)throw new Error("Please include a Loggly HTTP URL.");this.level=opts.level?log_methods[opts.level.toLowerCase()]:log_methods.info;var logger_factory=function(level_name){return function(data){if(log_methods[level_name]>=this.level){if("string"!=typeof data)try{data=JSON.stringify(data)}catch(error){}opts.data=data,send_data(opts)}}};for(name in log_methods)this[name]=logger_factory(name)};this.loggly?this.loggly.castor=castor:this.loggly={castor:castor}}();var Logger;null==window.console&&(window.console={log:function(){},dir:function(){},assert:function(){},clear:function(){},count:function(){},debug:function(){},dir:function(){},dirxml:function(){},error:function(){},exception:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},markTimeline:function(){},profile:function(){},profileEnd:function(){},table:function(){},time:function(){},timeEnd:function(){},timeStamp:function(){},trace:function(){},warn:function(){}}),Logger=function(){function Logger(options){var castor,k,v,_original,_ref,_ref1,_ref2,_ref3,_ref4,_this=this;null==options&&(options={}),this.logLevel=null!=(_ref=options.level)?_ref:0,this.begin=null!=(_ref1=options.begin)?_ref1:+new Date,this.format=null!=(_ref2=options.format)?_ref2:function(){},this._console=window.console,_ref3=this._console;for(k in _ref3)v=_ref3[k],"dir"!==k&&"inspect"!==k&&"debug"!==k&&"log"!==k&&"warn"!==k&&"info"!==k&&"error"!==k&&(this[k]=v);this._log=function(level,txt){return level<=_this.logLevel?_this._console.log("["+_this._ts()+"] "+txt):void 0},options.key&&(castor=new loggly.castor({url:""+(null!=(_ref4=document.location.protocol)?_ref4:"http:")+"//logs.loggly.com/inputs/"+options.key,level:"log"},_original=this._log,this._log=function(level,txt){var kv;return level<=_this.logLevel&&_original(level,txt),1>=level?(kv={url:window.location.href,msg:txt,browser:{name:BrowserDetect.browser,version:BrowserDetect.version},system:BrowserDetect.OS},_this.format(kv),castor.log(kv)):void 0}))}return Logger.prototype._ts=function(){return""+(+new Date-this.begin)/1e3},Logger.prototype.dir=function(obj){return this.logLevel>=3?this._console.dir(obj):void 0},Logger.prototype.devel=function(txt){return this._log(4,"DEVEL "+txt)},Logger.prototype.debug=function(txt){return this._log(3,"DEBUG "+txt)},Logger.prototype.info=function(txt){return this._log(2,"INFO  "+txt)},Logger.prototype.warn=function(txt){return this._log(1,"WARN  "+txt)},Logger.prototype.error=function(txt){return this._log(1,"ERROR "+txt)},Logger.prototype.log=function(txt){return this._log(3,"LOG   "+txt)},Logger}();